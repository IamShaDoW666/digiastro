---
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import ProductCard from "../../components/ProductCard.astro";
import MapContainer from "../../components/GoogleMap";
// Fetching all the product related content and sorting it by main.id
const product: CollectionEntry<"products">[] = (
  await getCollection("products")
).sort(
  (a: CollectionEntry<"products">, b: CollectionEntry<"products">) =>
    a.data.main.id - b.data.main.id
);

const productCamera: CollectionEntry<"products">[] = (
  await getCollection("products")
).filter((a: CollectionEntry<"products">) => a.data.main.category == "Camera");

const productDvr: CollectionEntry<"products">[] = (
  await getCollection("products")
).filter((a: CollectionEntry<"products">) => a.data.main.category == "DVR");

// Define variables for page content
const title: string = "Products";
const subTitle: string =
  "Explore the durability and precision of ScrewFast tools, designed for both professionals and enthusiasts. Each of our products is crafted with precision and built to last, ensuring you have the right tool for every job.";
---

<Layout title="Products | Digital Link">
  <div>
    <div class="mt-6 sm:mb-1 mx-auto md:mb-6 w-1/4 text-center">
      <h2
        class="text-balance text-2xl  p-2 rounded bg-slate-200  font-normal text-neutral-800 dark:text-neutral-800 sm:text-3xl lg:text-4xl"
      >
        All Products
      </h2>
    </div>
    <!-- <div class="grid grid-cols-1 w-full gap-4  lg:grid-cols-4 sm:grid-cols-2 md:gap-6 xl:gap-8 "> -->
    <div
      class="grid grid-cols-1 px-12 py-12 mt-8 w-full gap-4 lg:grid-cols-6 lg:gap-4 md:grid-2 md:grid-cols-4 sm:grid-cols-2 md:gap-4 xl:gap-4"
    >
      {product.map((product, index) => <ProductCard product={product} />)}
    </div>
  </div>

  <div>
    <div class="mt-6 sm:mb-1 mx-auto md:mb-6 w-1/4 text-center">
      <h2
        class="text-balance text-2xl  p-2 rounded bg-slate-200  font-normal text-neutral-800 dark:text-neutral-800 sm:text-3xl lg:text-4xl"
      >
        Camera
      </h2>
    </div>
    <!-- <div class="grid grid-cols-1 w-full gap-4  lg:grid-cols-4 sm:grid-cols-2 md:gap-6 xl:gap-8 "> -->
    <div
      class="grid grid-cols-1 px-12 py-12 mt-8 w-full gap-4 lg:grid-cols-6 lg:gap-4 md:grid-2 md:grid-cols-4 sm:grid-cols-2 md:gap-4 xl:gap-4"
    >
      {productCamera.map((product, index) => <ProductCard product={product} />)}
    </div>
  </div>

  <div>
    <div class="mt-6 sm:mb-1 mx-auto md:mb-6 w-1/4 text-center">
      <h2
        class="text-balance text-2xl  p-2 rounded bg-slate-200  font-normal text-neutral-800 dark:text-neutral-800 sm:text-3xl lg:text-4xl"
      >
        DVR
      </h2>
    </div>
    <!-- <div class="grid grid-cols-1 w-full gap-4  lg:grid-cols-4 sm:grid-cols-2 md:gap-6 xl:gap-8 "> -->
    <div
      class="grid grid-cols-1 px-12 py-12 mt-8 w-full gap-4 lg:grid-cols-6 lg:gap-4 md:grid-2 md:grid-cols-4 sm:grid-cols-2 md:gap-4 xl:gap-4"
    >
      {productDvr.map((product, index) => <ProductCard product={product} />)}
    </div>
  </div>
</Layout>
